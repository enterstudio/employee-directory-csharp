<!DOCTYPE html><html><head><title>Employee Directory</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Employee Directory"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Employee Directory</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Use Twilio to accept SMS messages and turn them into queries against an SQL database. This example functions as an Employee Directory where a mobile phone user can send a text message with a partial string of the person's name and it will return their picture and contact information (Email address and Phone number).</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Employee Directory" class="chapter"><div data-title="Introduction" data-file="EmployeeDirectory.Web/Models/Employee.cs" class="step"><h2 id="what-is-the-employee-directory-">What is the Employee Directory?</h2>
<p>This <a href="http://www.asp.net/mvc">ASP.NET</a> sample application demonstrates
how to respond to SMS messages with meaningful data. In this tutorial, 
we&#39;ll show you the key bits of code to take the input message, perform
a database lookup, and return a useful result to the user.</p>
<p>This sample app is an Employee Directory that can be used from just an
SMS client. No internet connection or special apps need to be installed.
The mobile user can simply send a text to a special phone # with the
name (or partial name) of the employee for which they need contact
information and receive an instant reply with the employee&#39;s name,
photo, email address, and phone number.</p>
<p>If more than one employee matches the string being searched, then the
response will contain a list of choices for the user to select from.
This will demonstrate the usage of a cookie with Twilio so state can
be preserved between web hook calls to our service.</p>
<p>Let&#39;s get started!</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="http://www.asp.net/mvc">ASP.NET</a></li>
<li><a href="http://www.asp.net/mvc/overview/getting-started/introduction/getting-started">Getting Started with ASP.NET MVC
5</a></li>
</ul>
</div><div data-title="Create the Model" data-file="EmployeeDirectory.Web/Models/Employee.cs" class="step"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porttitor odio eu nunc fringilla pharetra. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin in risus eu risus commodo rutrum ullamcorper vel ex. Ut sodales libero id venenatis volutpat. Sed vel hendrerit metus, scelerisque pulvinar erat. Duis ut leo sed augue eleifend vehicula. Etiam scelerisque porta ligula. Curabitur molestie lorem a faucibus porttitor. Integer aliquam congue sem sed laoreet. Donec consectetur dignissim sapien, vitae euismod nisl bibendum sed. Curabitur nec facilisis arcu.</p>
<p>Vivamus interdum justo quis nibh mattis, vel dignissim nisl pellentesque. Duis pulvinar at dolor sit amet efficitur. Sed eu elementum sapien. Integer iaculis ullamcorper leo at interdum. Proin malesuada hendrerit lectus. Vestibulum tincidunt ipsum vel nulla consectetur malesuada. Fusce ut malesuada odio, ut porta lorem. Donec porttitor est at neque pellentesque, eu pulvinar arcu interdum. Nullam tristique ornare est, ut pulvinar mauris sollicitudin et. Cras posuere consequat diam, id tempus nibh euismod vel.</p>
</div><div data-title="Setup the DbContext" data-file="EmployeeDirectory.Web/Models/EmployeeDbContext.cs" class="step"><p>Sed eget convallis dolor. Sed feugiat justo eget nunc dictum ultricies. Mauris venenatis dolor eget ornare volutpat. Integer aliquam eget velit sit amet lacinia. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque pulvinar elementum risus eu mattis. Suspendisse sapien arcu, sagittis nec pharetra semper, aliquam eu turpis. Nulla orci turpis, varius vel malesuada sed, sodales eget arcu. Quisque in ligula ac urna tristique dignissim. Suspendisse potenti.</p>
</div><div data-title="Employee Directory Service" data-file="EmployeeDirectory.Web/Services/EmployeeDirectoryService.cs" class="step"><p>Morbi ullamcorper scelerisque leo. Donec quis risus nisi. Aliquam mattis sit amet augue quis ornare. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec posuere vitae nisl id eleifend. Nunc elementum dapibus nibh ac tempus. Cras venenatis odio ipsum, a sollicitudin velit faucibus eget. Aliquam nisi nunc, rhoncus sed tellus ac, condimentum blandit nisi. Quisque vel porta nibh. Etiam dictum sollicitudin orci ut volutpat. Nunc in urna sed erat interdum maximus vitae ac nisl. Donec mattis elit at convallis gravida. Pellentesque luctus, lorem pretium lacinia auctor, tellus neque tristique urna, eget efficitur enim nulla eu metus. Nulla placerat dui sem, nec fermentum purus faucibus ut. Aliquam est metus, aliquam in ultrices efficitur, gravida sed lacus. Aliquam risus sapien, scelerisque suscipit mi sed, eleifend pellentesque justo.</p>
</div><div data-title="Application Test Page" data-file="EmployeeDirectory.Web/Controllers/HomeController.cs" class="step"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porttitor odio eu nunc fringilla pharetra. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin in risus eu risus commodo rutrum ullamcorper vel ex. Ut sodales libero id venenatis volutpat. Sed vel hendrerit metus, scelerisque pulvinar erat. Duis ut leo sed augue eleifend vehicula. Etiam scelerisque porta ligula. Curabitur molestie lorem a faucibus porttitor. Integer aliquam congue sem sed laoreet. Donec consectetur dignissim sapien, vitae euismod nisl bibendum sed. Curabitur nec facilisis arcu.</p>
</div><div data-title="SMS Web Hook Event Handler" data-file="EmployeeDirectory.Web/Controllers/EmployeeController.cs" data-highlight="21-42" class="step"><p>Sed eget convallis dolor. Sed feugiat justo eget nunc dictum ultricies. Mauris venenatis dolor eget ornare volutpat. Integer aliquam eget velit sit amet lacinia. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque pulvinar elementum risus eu mattis. Suspendisse sapien arcu, sagittis nec pharetra semper, aliquam eu turpis. Nulla orci turpis, varius vel malesuada sed, sodales eget arcu. Quisque in ligula ac urna tristique dignissim. Suspendisse potenti.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porttitor odio eu nunc fringilla pharetra. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin in risus eu risus commodo rutrum ullamcorper vel ex. Ut sodales libero id venenatis volutpat. Sed vel hendrerit metus, scelerisque pulvinar erat. Duis ut leo sed augue eleifend vehicula. Etiam scelerisque porta ligula. Curabitur molestie lorem a faucibus porttitor. Integer aliquam congue sem sed laoreet. Donec consectetur dignissim sapien, vitae euismod nisl bibendum sed. Curabitur nec facilisis arcu.</p>
</div><div data-title="Looking Up An Employee" data-file="EmployeeDirectory.Web/Controllers/EmployeeController.cs" data-highlight="37-40" class="step"><p>Ignore GetEmployeesIfNumericInput() for now (to be explained later).</p>
<p>Vivamus interdum justo quis nibh mattis, vel dignissim nisl pellentesque. Duis pulvinar at dolor sit amet efficitur. Sed eu elementum sapien. Integer iaculis ullamcorper leo at interdum. Proin malesuada hendrerit lectus. Vestibulum tincidunt ipsum vel nulla consectetur malesuada. Fusce ut malesuada odio, ut porta lorem. Donec porttitor est at neque pellentesque, eu pulvinar arcu interdum. Nullam tristique ornare est, ut pulvinar mauris sollicitudin et. Cras posuere consequat diam, id tempus nibh euismod vel.</p>
<p>Sed eget convallis dolor. Sed feugiat justo eget nunc dictum ultricies. Mauris venenatis dolor eget ornare volutpat. Integer aliquam eget velit sit amet lacinia. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque pulvinar elementum risus eu mattis. Suspendisse sapien arcu, sagittis nec pharetra semper, aliquam eu turpis. Nulla orci turpis, varius vel malesuada sed, sodales eget arcu. Quisque in ligula ac urna tristique dignissim. Suspendisse potenti.</p>
</div><div data-title="Formatting the Response" data-file="EmployeeDirectory.Web/Controllers/EmployeeController.cs" data-highlight="87-110" class="step"><p>Morbi ullamcorper scelerisque leo. Donec quis risus nisi. Aliquam mattis sit amet augue quis ornare. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec posuere vitae nisl id eleifend. Nunc elementum dapibus nibh ac tempus. Cras venenatis odio ipsum, a sollicitudin velit faucibus eget. Aliquam nisi nunc, rhoncus sed tellus ac, condimentum blandit nisi. Quisque vel porta nibh. Etiam dictum sollicitudin orci ut volutpat. Nunc in urna sed erat interdum maximus vitae ac nisl. Donec mattis elit at convallis gravida. Pellentesque luctus, lorem pretium lacinia auctor, tellus neque tristique urna, eget efficitur enim nulla eu metus. Nulla placerat dui sem, nec fermentum purus faucibus ut. Aliquam est metus, aliquam in ultrices efficitur, gravida sed lacus. Aliquam risus sapien, scelerisque suscipit mi sed, eleifend pellentesque justo.</p>
</div><div data-title="Handling Multiple Matches" data-file="EmployeeDirectory.Web/Controllers/EmployeeController.cs" data-highlight="112-137" class="step"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porttitor odio eu nunc fringilla pharetra. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin in risus eu risus commodo rutrum ullamcorper vel ex. Ut sodales libero id venenatis volutpat. Sed vel hendrerit metus, scelerisque pulvinar erat. Duis ut leo sed augue eleifend vehicula. Etiam scelerisque porta ligula. Curabitur molestie lorem a faucibus porttitor. Integer aliquam congue sem sed laoreet. Donec consectetur dignissim sapien, vitae euismod nisl bibendum sed. Curabitur nec facilisis arcu.</p>
</div><div data-title="Multiple Match Selection Reply" data-file="EmployeeDirectory.Web/Controllers/EmployeeController.cs" data-highlight="37, 44-85" class="step"><p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin in risus eu risus commodo rutrum ullamcorper vel ex. Ut sodales libero id venenatis volutpat. Sed vel hendrerit metus, scelerisque pulvinar erat. Duis ut leo sed augue eleifend vehicula. Etiam scelerisque porta ligula. Curabitur molestie lorem a faucibus porttitor. Integer aliquam congue sem sed laoreet. Donec consectetur dignissim sapien, vitae euismod nisl bibendum sed. Curabitur nec facilisis arcu.</p>
</div><div data-title="Return XML" data-file="EmployeeDirectory.Web/Controllers/EmployeeController.cs" data-highlight="41" class="step"><p>Sed eget convallis dolor. Sed feugiat justo eget nunc dictum ultricies. Mauris venenatis dolor eget ornare volutpat. Integer aliquam eget velit sit amet lacinia. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque pulvinar elementum risus eu mattis. Suspendisse sapien arcu, sagittis nec pharetra semper, aliquam eu turpis. Nulla orci turpis, varius vel malesuada sed, sodales eget arcu. Quisque in ligula ac urna tristique dignissim. Suspendisse potenti.</p>
</div><div data-title="Summary" class="step"><h2 id="where-to-next-">Where to next?</h2>
<p>That&#39;s it! We&#39;ve just implemented an automated server notification system
that can send you server alerts if anything goes wrong. If you&#39;re a C#
developer working with Twilio, you might want to check out these other
tutorials.</p>
<p><a href="https://www.twilio.com/docs/howto/walkthrough/two-factor-authentication/csharp/mvc"><strong>Two-Factor
Authentication</strong></a></p>
<p>Increase the security of your login system by verifying a user&#39;s mobile
phone in addition to their password.</p>
<p><a href="https://www.twilio.com/docs/howto/walkthrough/appointment-reminders/csharp/mvc"><strong>Appointment
Reminders</strong></a></p>
<p>Send your customers a text message when they have an upcoming appointment,
this tutorial shows you how to do it from a background job.</p>
<h3 id="did-this-help-">Did this help?</h3>
<p>Thanks for checking out this tutorial! If you have any feedback to share
with us, we&#39;d love to hear it. Tweet <a href="http://twitter.com/twilio">@twilio</a>
to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="EmployeeDirectory.Web/Models/Employee.cs" data-mode="csharp">77u/bmFtZXNwYWNlIEVtcGxveWVlRGlyZWN0b3J5LldlYi5Nb2RlbHMNCnsNCiAgcHVibGljIGNsYXNzIEVtcGxveWVlDQogIHsNCiAgICBwdWJsaWMgaW50IElkIHsgZ2V0OyBzZXQ7IH0NCiAgICBwdWJsaWMgc3RyaW5nIEZ1bGxOYW1lIHsgZ2V0OyBzZXQ7IH0NCiAgICBwdWJsaWMgc3RyaW5nIEVtYWlsIHsgZ2V0OyBzZXQ7IH0NCiAgICBwdWJsaWMgc3RyaW5nIFBob25lTnVtYmVyIHsgZ2V0OyBzZXQ7IH0NCiAgICBwdWJsaWMgc3RyaW5nIEltYWdlVXJsIHsgZ2V0OyBzZXQ7IH0NCiAgfQ0KfQ==</textarea>
<textarea class="saurus-file" data-file="EmployeeDirectory.Web/Models/EmployeeDbContext.cs" data-mode="csharp">77u/dXNpbmcgU3lzdGVtLkNvbmZpZ3VyYXRpb247DQp1c2luZyBTeXN0ZW0uRGF0YS5FbnRpdHk7DQp1c2luZyBFbXBsb3llZURpcmVjdG9yeS5XZWIuTW9kZWxzLlNxbGl0ZTsNCnVzaW5nIEVtcGxveWVlRGlyZWN0b3J5LldlYi5Nb2RlbHMuU3FsU2VydmVyOw0KDQpuYW1lc3BhY2UgRW1wbG95ZWVEaXJlY3RvcnkuV2ViLk1vZGVscw0Kew0KICAgIHB1YmxpYyBjbGFzcyBFbXBsb3llZURiQ29udGV4dCA6IERiQ29udGV4dA0KICAgIHsNCiAgICAgICAgcHJpdmF0ZSBjb25zdCBzdHJpbmcgQ29ubmVjdGlvblN0cmluZ05hbWUgPSAiRGVmYXVsdENvbm5lY3Rpb24iOw0KDQogICAgICAgIHB1YmxpYyBFbXBsb3llZURiQ29udGV4dCgpIDogYmFzZShDb25uZWN0aW9uU3RyaW5nTmFtZSkNCiAgICAgICAgew0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIHZvaWQgT25Nb2RlbENyZWF0aW5nKERiTW9kZWxCdWlsZGVyIG1vZGVsQnVpbGRlcikNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVXNlIHRoZSBjb3JyZWN0IGluaXRpYWxpemVyIHdpbGwgYmUgdXNlZCBiYXNlZCBvbiB0aGUgcHJvdmlkZXJOYW1lDQogICAgICAgICAgICAvLyBmb3IgdGhlICdEZWZhdWx0Q29ubmVjdGlvbicgY29ubmVjdGlvblN0cmluZy4NCiAgICAgICAgICAgIHZhciBjcyA9IENvbmZpZ3VyYXRpb25NYW5hZ2VyLkNvbm5lY3Rpb25TdHJpbmdzW0Nvbm5lY3Rpb25TdHJpbmdOYW1lXTsNCiAgICAgICAgICAgIGlmIChjcy5Qcm92aWRlck5hbWUgPT0gIlN5c3RlbS5EYXRhLlNRTGl0ZSIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRGF0YWJhc2UuU2V0SW5pdGlhbGl6ZXIobmV3IEVtcGxveWVlRGJTcWxpdGVJbml0aWFsaXplcihtb2RlbEJ1aWxkZXIpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBEYXRhYmFzZS5TZXRJbml0aWFsaXplcihuZXcgRW1wbG95ZWVEYlNxbFNlcnZlckluaXRpYWxpemVyKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIHZpcnR1YWwgRGJTZXQ8RW1wbG95ZWU+IEVtcGxveWVlcyB7IGdldDsgc2V0OyB9DQogICAgfQ0KfQ==</textarea>
<textarea class="saurus-file" data-file="EmployeeDirectory.Web/Services/EmployeeDirectoryService.cs" data-mode="csharp">77u/dXNpbmcgRW1wbG95ZWVEaXJlY3RvcnkuV2ViLk1vZGVsczsNCnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljOw0KdXNpbmcgU3lzdGVtLkRhdGEuRW50aXR5Ow0KdXNpbmcgU3lzdGVtLkxpbnE7DQp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOw0KDQpuYW1lc3BhY2UgRW1wbG95ZWVEaXJlY3RvcnkuV2ViLlNlcnZpY2VzDQp7DQogICAgcHVibGljIGNsYXNzIEVtcGxveWVlRGlyZWN0b3J5U2VydmljZQ0KICAgIHsNCiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBFbXBsb3llZURiQ29udGV4dCBfY29udGV4dDsNCg0KICAgICAgICBwdWJsaWMgRW1wbG95ZWVEaXJlY3RvcnlTZXJ2aWNlKEVtcGxveWVlRGJDb250ZXh0IGNvbnRleHQpDQogICAgICAgIHsNCiAgICAgICAgICAgIF9jb250ZXh0ID0gY29udGV4dDsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPElFbnVtZXJhYmxlPEVtcGxveWVlPj4gRmluZEJ5TmFtZVBhcnRpYWxBc3luYyhzdHJpbmcgcGFydGlhbE5hbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHBhcnRpYWxOYW1lID0gcGFydGlhbE5hbWUuVG9Mb3dlcigpOw0KICAgICAgICAgICAgcmV0dXJuIGF3YWl0IF9jb250ZXh0LkVtcGxveWVlcw0KICAgICAgICAgICAgICAgIC5XaGVyZShlID0+IGUuRnVsbE5hbWUuVG9Mb3dlcigpLkNvbnRhaW5zKHBhcnRpYWxOYW1lKSkNCiAgICAgICAgICAgICAgICAuVG9MaXN0QXN5bmMoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyBhc3luYyBUYXNrPEVtcGxveWVlPiBGaW5kQnlJZEFzeW5jKGludCBpZCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGF3YWl0IF9jb250ZXh0LkVtcGxveWVlcw0KICAgICAgICAgICAgICAgIC5GaXJzdE9yRGVmYXVsdEFzeW5jKGUgPT4gZS5JZCA9PSBpZCk7DQogICAgICAgIH0NCiAgICB9DQp9DQo=</textarea>
<textarea class="saurus-file" data-file="EmployeeDirectory.Web/Controllers/HomeController.cs" data-mode="csharp">77u/dXNpbmcgRW1wbG95ZWVEaXJlY3RvcnkuV2ViLk1vZGVsczsNCnVzaW5nIEVtcGxveWVlRGlyZWN0b3J5LldlYi5TZXJ2aWNlczsNCnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7DQp1c2luZyBTeXN0ZW0uV2ViLk12YzsNCg0KbmFtZXNwYWNlIEVtcGxveWVlRGlyZWN0b3J5LldlYi5Db250cm9sbGVycw0Kew0KICAgIHB1YmxpYyBjbGFzcyBIb21lQ29udHJvbGxlciA6IENvbnRyb2xsZXINCiAgICB7DQogICAgICAgIC8vIFRoZSBIb21lIGNvbnRyb2xsZXIgaXMganVzdCB0byB2YWxpZGF0ZSB0aGF0IG91ciBhcHAgaXMgd29ya2luZy4NCiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8QWN0aW9uUmVzdWx0PiBJbmRleCgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHVzaW5nICh2YXIgY29udGV4dCA9IG5ldyBFbXBsb3llZURiQ29udGV4dCgpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IEVtcGxveWVlRGlyZWN0b3J5U2VydmljZShjb250ZXh0KTsNCiAgICAgICAgICAgICAgICBWaWV3QmFnLkZpcnN0RW1wbG95ZWUgPSBhd2FpdCBzZXJ2aWNlLkZpbmRCeUlkQXN5bmMoMSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBWaWV3KCk7DQogICAgICAgIH0NCiAgICB9DQp9</textarea>
<textarea class="saurus-file" data-file="EmployeeDirectory.Web/Controllers/EmployeeController.cs" data-mode="csharp">77u/dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBTeXN0ZW0uTGlucTsNCnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7DQp1c2luZyBTeXN0ZW0uV2ViOw0KdXNpbmcgU3lzdGVtLldlYi5NdmM7DQp1c2luZyBFbXBsb3llZURpcmVjdG9yeS5XZWIuTW9kZWxzOw0KdXNpbmcgRW1wbG95ZWVEaXJlY3RvcnkuV2ViLlNlcnZpY2VzOw0KdXNpbmcgVHdpbGlvLk12YzsNCnVzaW5nIFR3aWxpby5Ud2lNTDsNCnVzaW5nIFR3aWxpby5Ud2lNTC5NdmM7DQoNCm5hbWVzcGFjZSBFbXBsb3llZURpcmVjdG9yeS5XZWIuQ29udHJvbGxlcnMNCnsNCiAgICBwdWJsaWMgY2xhc3MgRW1wbG95ZWVDb250cm9sbGVyIDogQ29udHJvbGxlcg0KICAgIHsNCiAgICAgICAgcHVibGljIGNvbnN0IHN0cmluZyBOb3RGb3VuZE1lc3NhZ2UgPSAiV2UgY291bGQgbm90IGZpbmQgYW4gZW1wbG95ZWUgbWF0Y2hpbmcgJ3swfSciOw0KICAgICAgICBwdWJsaWMgY29uc3Qgc3RyaW5nIENvb2tpZU5hbWUgPSAiRW1wRGlySWRMaXN0IjsNCiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBFbXBsb3llZURpcmVjdG9yeVNlcnZpY2UgX3NlcnZpY2U7DQoNCiAgICAgICAgcHVibGljIEVtcGxveWVlQ29udHJvbGxlcigpDQogICAgICAgIHsNCiAgICAgICAgICAgIF9zZXJ2aWNlID0gbmV3IEVtcGxveWVlRGlyZWN0b3J5U2VydmljZShuZXcgRW1wbG95ZWVEYkNvbnRleHQoKSk7DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgRW1wbG95ZWVDb250cm9sbGVyKEVtcGxveWVlRGlyZWN0b3J5U2VydmljZSBzZXJ2aWNlKQ0KICAgICAgICB7DQogICAgICAgICAgICBfc2VydmljZSA9IHNlcnZpY2U7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBUd2lsaW8gd2lsbCBjYWxsIHRoaXMgd2hlbmV2ZXIgb3VyIHBob25lICMgcmVjZWl2ZXMgYW4gU01TIG1lc3NhZ2UuDQogICAgICAgIFtIdHRwUG9zdF0NCiAgICAgICAgcHVibGljIGFzeW5jIFRhc2s8QWN0aW9uUmVzdWx0PiBMb29rdXAoU21zUmVxdWVzdCByZXF1ZXN0KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaW5jb21pbmdNZXNzYWdlVGV4dCA9IHJlcXVlc3QuQm9keTsNCg0KICAgICAgICAgICAgdmFyIGVtcGxveWVlcyA9IGF3YWl0IEdldEVtcGxveWVlc0lmTnVtZXJpY0lucHV0KGluY29taW5nTWVzc2FnZVRleHQpID8/DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgX3NlcnZpY2UuRmluZEJ5TmFtZVBhcnRpYWxBc3luYyhpbmNvbWluZ01lc3NhZ2VUZXh0KTsNCg0KICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gR2V0VHdpbGlvUmVzcG9uc2VGb3JFbXBsb3llZXMoZW1wbG95ZWVzLCBpbmNvbWluZ01lc3NhZ2VUZXh0KTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgVHdpTUxSZXN1bHQocmVzcG9uc2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSBhc3luYyBUYXNrPElFbnVtZXJhYmxlPEVtcGxveWVlPj4gR2V0RW1wbG95ZWVzSWZOdW1lcmljSW5wdXQoc3RyaW5nIGluY29taW5nTWVzc2FnZVRleHQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBudW0gPSBQYXJzZU51bWJlcihpbmNvbWluZ01lc3NhZ2VUZXh0KTsNCiAgICAgICAgICAgIHZhciBrZXlzID0gR2V0TGlzdE9mS2V5c0Zyb21Db29raWUoKTsNCg0KICAgICAgICAgICAgaWYgKElzTnVtYmVyQW5kSW5MaXN0T2ZLZXlzKG51bSwga2V5cykpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IEdldExpc3RPZk9uZUVtcGxveWVlQnlJZChrZXlzLCBudW0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZhdGUgc3RhdGljIGludCBQYXJzZU51bWJlcihzdHJpbmcgaW5jb21pbmdNZXNzYWdlVGV4dCkNCiAgICAgICAgew0KICAgICAgICAgICAgaW50IHZhbHVlOw0KICAgICAgICAgICAgcmV0dXJuIGludC5UcnlQYXJzZShpbmNvbWluZ01lc3NhZ2VUZXh0LCBvdXQgdmFsdWUpID8gdmFsdWUgOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSBzdHJpbmdbXSBHZXRMaXN0T2ZLZXlzRnJvbUNvb2tpZSgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBjb29raWUgPSBSZXF1ZXN0LkNvb2tpZXMuR2V0KENvb2tpZU5hbWUpOw0KICAgICAgICAgICAgaWYgKGNvb2tpZSA9PSBudWxsIHx8IGNvb2tpZS5WYWx1ZSA9PSBudWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIHJldHVybiBjb29raWUuVmFsdWUuU3BsaXQoJ34nKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZhdGUgc3RhdGljIGJvb2wgSXNOdW1iZXJBbmRJbkxpc3RPZktleXMoaW50IG51bSwgSVJlYWRPbmx5TGlzdDxzdHJpbmc+IGtleXMpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBudW0gPiAwICYmIGtleXMgIT0gbnVsbCAmJiBudW0gPD0ga2V5cy5Db3VudDsNCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZhdGUgYXN5bmMgVGFzazxJRW51bWVyYWJsZTxFbXBsb3llZT4+IEdldExpc3RPZk9uZUVtcGxveWVlQnlJZChJUmVhZE9ubHlMaXN0PHN0cmluZz4ga2V5cywgaW50IG51bSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGlkID0gUGFyc2VOdW1iZXIoa2V5c1tudW0gLSAxXSk7DQogICAgICAgICAgICB2YXIgZW1wbG95ZWUgPSBhd2FpdCBfc2VydmljZS5GaW5kQnlJZEFzeW5jKGlkKTsNCiAgICAgICAgICAgIHJldHVybiBlbXBsb3llZSA9PSBudWxsID8gbnVsbCA6IENvbnZlcnRUb0FycmF5KGVtcGxveWVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZhdGUgc3RhdGljIElFbnVtZXJhYmxlPEVtcGxveWVlPiBDb252ZXJ0VG9BcnJheShFbXBsb3llZSBlbXBsb3llZSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBbXSB7IGVtcGxveWVlIH07DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIFR3aWxpb1Jlc3BvbnNlIEdldFR3aWxpb1Jlc3BvbnNlRm9yRW1wbG95ZWVzKElFbnVtZXJhYmxlPEVtcGxveWVlPiBlbXBsb3llZXMsIHN0cmluZyBpbmNvbWluZ01lc3NhZ2VUZXh0KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBuZXcgVHdpbGlvUmVzcG9uc2UoKTsNCiAgICAgICAgICAgIHZhciBlbXBsb3llZUxpc3QgPSBlbXBsb3llZXMuVG9MaXN0KCk7DQoNCiAgICAgICAgICAgIHN3aXRjaCAoZW1wbG95ZWVMaXN0LkNvdW50KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNhc2UgMDogLy8gTm8gRW1wbG95ZWVzIEZvdW5kDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLk1lc3NhZ2Uoc3RyaW5nLkZvcm1hdChOb3RGb3VuZE1lc3NhZ2UsIGluY29taW5nTWVzc2FnZVRleHQpKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICAgICBjYXNlIDE6IC8vIEEgU2luZ2xlIEVtcGxveWVlIEZvdW5kDQogICAgICAgICAgICAgICAgICAgIHZhciBlbXBsb3llZSA9IGVtcGxveWVlTGlzdC5GaXJzdCgpOw0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5NZXNzYWdlKGVtcGxveWVlLkZ1bGxOYW1lICsgIiAtICIgKyBlbXBsb3llZS5FbWFpbCArICIgLSAiICsgZW1wbG95ZWUuUGhvbmVOdW1iZXIsDQogICAgICAgICAgICAgICAgICAgICAgICBuZXdbXSB7ZW1wbG95ZWUuSW1hZ2VVcmx9LCBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICAgICBkZWZhdWx0OiAvLyBNdWx0aXBsZSBFbXBsb3llZXMgRm91bmQNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuTWVzc2FnZShHZXRNZXNzYWdlRm9yTXVsdGlwbGVFbXBsb3llZXMoZW1wbG95ZWVMaXN0KSk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIHN0cmluZyBHZXRNZXNzYWdlRm9yTXVsdGlwbGVFbXBsb3llZXMoSVJlYWRPbmx5TGlzdDxFbXBsb3llZT4gZW1wbG95ZWVzKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbXNnID0gIldlIGZvdW5kOiAiOw0KICAgICAgICAgICAgdmFyIGlkTGlzdCA9ICIiOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbXBsb3llZXMuQ291bnQ7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBtc2cgKz0gaSArIDEgKyAiLSIgKyBlbXBsb3llZXNbaV0uRnVsbE5hbWU7DQogICAgICAgICAgICAgICAgaWRMaXN0ICs9IGVtcGxveWVlc1tpXS5JZDsNCiAgICAgICAgICAgICAgICBpZiAoaSA9PSBlbXBsb3llZXMuQ291bnQgLSAxKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICBtc2cgKz0gIiwgIjsNCiAgICAgICAgICAgICAgICBpZExpc3QgKz0gIn4iOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbXNnICs9ICIgLSBSZXBseSB3aXRoICMgb2YgZGVzaXJlZCBwZXJzb24iOw0KDQogICAgICAgICAgICBBZGRMaXN0T2ZJZHNDb29raWUoaWRMaXN0KTsNCiAgICAgICAgICAgIHJldHVybiBtc2c7DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIHZvaWQgQWRkTGlzdE9mSWRzQ29va2llKHN0cmluZyBpZExpc3QpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBjb29raWUgPSBuZXcgSHR0cENvb2tpZShDb29raWVOYW1lLCBpZExpc3QpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRXhwaXJlcyA9IERhdGVUaW1lLlV0Y05vdy5BZGRIb3Vycyg0KQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIFJlc3BvbnNlLkNvb2tpZXMuQWRkKGNvb2tpZSk7DQogICAgICAgIH0NCiAgICB9DQp9</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>